# Ողջո՜ւյն, աշխա՛րհ

Մի որևէ ծրագրավորման լեզվի ուսումնասիրությունը սկսելիս առաջին ծրագիրն ընտրում են այնպես, որ այն չպարունակի բարդ լեզվական ու ալգորիթմական կառուցվածքներ, բայց սկսնակ ծրագրավորողին հնարավորություն տա ամբողջությամբ տեսնել մեկ ծրագրի կյանքը՝ ստեղծումից մինչև կատարում։ C++ լեզվով գրված մեր առաջին ծրագիրն էլ բարդ չէ․ այն արտածման ստանդարտ հոսքին է դուրս բերում «Ողջո՜ւյն, աշխա՛րհ։» տեքստը։

Գործարկենք տեքստային խմբագրիչը (կամ ծրագրերի մշակման ինտեգրացված միջավայրը ― IDE) և նրա օգնությամբ ստեղծենք `hello.cxx` ֆայլը՝ հետևյալ պարունակությամբ․

```c++
// Առաջին C++ ծրագիրը
#include <iostream>

int main()
{
    std::cout << "Ողջո՜ւյն, աշխա՛րհ։\n";
}
```

Ծրագրի տեքստը ֆայլում հիշելուց հետո այն պետք է C++ _կոմպիլյատորի_ (_compiler_) օգնությամբ _թարգմանել_ (_compile_) մեքենայական հրամանների և _կատարել_ (_execute_)։ Բայց, մինչև այս քայլերի մանրամասն նկարագրությունը, մի փոքր առաջ անցնենք ու ծրագրի ամեն մի տողի համար տանք համառոտ մեկնաբանություն։

Առաջին տողը `//` նիշերով սկսվող և մինչև տողի վերջը շարունակվող _մեկնաբանություն_ է։ Մեկնաբանությունները, որոնք կարող են պարունակել կամայական տեքստ, ծրագրի իմաստի վրա չեն ազդում և ամբողջովին անտեսվում են կոմպիլյատորի կողմից։ Դրանք ծառայում են մարդ-ընթերցողին ծրագրի մասին լրացուցիչ տեղեկություններ տրամադրելու համար։

Երկրորդ տողում գրված `#include` հրահանգը _նախապրոցեսորից_ (preprocessor) պահանջում է ծրագրի տեքստին կցել `iostream` գրադարանային ֆայլի պարունակությունը։ Այս ֆայլում են սահմանված ներմուծման ու արտածման ստանդարտ հոսքերի հետ աշխատող գործողություններն ու օբյեկտները։ Ի թիվս զանազան ֆունկցիաների ու օբյեկտների, `iostream` ֆայլը պարունակում է արտածման ստանդարտ հոսքի հետ կապված `cout` օբյեկտը, և իր աջ արգումենտի արժեքը ձախ արգումենտով տրված հոսքի մեջ ուղարկող `<<` գործողությունը։ C++20 ստանդարտում ներմուծվել է _մոդուլի_ (module) գաղափարը, որի մասին կխոսենք _??_ գլխում։

C++ լեզվով գրված ամեն մի ծրագիր պետք է պարունակի `main` անունով ֆունկցիա։ Այս ֆունկցիան ծրագրի _մուտքի կետն_ (_entry point_) է. ծրագրիրը սկսում է կատարվել `main` ֆունկցիայից։ Ավելի ճիշտ ասած՝ ծրագիրը կատարելու համար _օպերացիոն համակարգը_ «կանչում» է `main` ֆունկցիան։ Տվյալ դեպքում `main` ֆունկցիան պարամետրեր չունի և վերադարձնում է `int` (integer, ամբողջ թիվ) տիպի արժեք։ UNIX/Linux օպերացիոն համակարգերն այս ֆունկցիայի արժեքը մեկնաբանում են որպես ծրագրի հաջող կամ անհաջող ավարտի ազդանշան։ Ըստ պայմանավորվածության, `0` արժեքը համարվում է հաջող ավարտ, իսկ `0`֊ից տարբեր դրական ամբողջ թվերը՝ անհաջող ավարտ։ C++ ֆունկցիայից որևէ արժեք է վերադարձվում է `return` հրամանով։ Սակայն միայն `main` ֆունկցիայի համար կա բացառություն․ եթե բացահայտորեն նշված չէ `return` հրամանը, ապա վերադարձվող արժեքը համարվում է `0`։

`main` ֆունկցիայի _մարմինը_, որ պարփակված է `{` և `}` փակագծերի մեջ, պարունակում է միակ արտահայտություն, որում `<<` գործողության միջոցով «`Ողջո՜ւյն, աշխա՛րհ։`» տողն ուղարկվում է արտածման ստանդարտ հոսքի հետ կապված `cout` օբյեկտին։ `::` գործողությամբ `cout` անունին կցված `std` նախդիրը ցույց է տալիս, որ այդ երկու անունները պատկանում են լեզվի _Կաղապարների ստանդարտ գրադարանի_ (Standard template library, STL) անունների տիրույթին։ (Ֆունկցիաների հայտարման, սահմանման և կիրառման մասնին մանրամասնորեն խոսում ենք __??__ գլխում։)

Հիմա այս ծրագիրը թարգմանենք՝ _կոմպիլյացնենք_, մեքենայական կոդի և կատարենք։ Bash ինտերպրետատորի հրամանային տողում ներմուծենք հետևյալը.

```bash
$ c++ hello.cxx
```

C++ լեզվով գրված ծրագիրը թարգմանության ժամանակ անցնում է երեք հիմնական փուլ.
1. _նախնական մշակում_ (preprocessing) -- մշակվում են `#` նիշով սկսվող հրահանգները, որոնք ծրագրի հետ կատարում են զուտ տեքստային գործողություններ։ Օրինակ, ֆայլերի կցում, անունների փոխարինում արժեքներով և այլն,
2. _թարգմանություն_ (compilation) -- ծրագրավորողի գրած տեքստը թարգմանվում է մեքենայական կոդի և ստեղծվում է _օբյեկտային_ մոդուլ,
3. _կապակցում_ կամ _կապերի խմբագրում_ (linking) -- ստեղծված օբյեկտային ֆայլերը կապակցվում են գրադարանային (կամ այլ) օբյեկտային ֆայլերի հետ և կառուցվում է _կատարվող մոդուլ_։

Սովորաբար ծրագրի տեքստից կատարվող մոդուլի ստացման այս երեք փուլերը թաքնված են օգտագործողից և, պարզ ծրագերի դեպքում, կատարվում են մեկ հրամանով։ 

Եթե կոմպիլյատորը որևէ սխալ չի հայտնաբերել, ապա ընթացիկ պանակում ստեղծվում է `a.out` անունով կատարվող մոդուլը։ Եթե հարկավոր է կատարվող մոդուլին այլ անուն տալ, ապա այն պետք է նշել որպես `c++` հրամանի `-o` պարամետրի արժեք։ Օրինակ.

```bash
$ c++ -o hello hello.cxx
```

այս հրամանի հաջող կատարման արդյունքում կատարվող մոդուլը, `a.out`֊ի փոխարեն, ստանում է `hello` անունը։

`hello` մոդուլն աշխատեցնելու համար պետք է Bash֊ի հրամանային տողում ներմուծել.

```bash
$ ./hello
Ողջո՜ւյն, աշխա՛րհ։
```

Ծրագրի կատարման արդյունքում տեսնում ենք արտածված տողը. հենց այն՝ ինչ ակնկալում էինք առաջին ծրագրից։

Որպեսզի համոզվենք, որ իսկապես `main` ֆունկցիայի վերադարձրած արժեքը փոխանցվում է օպերացիոն համակարգին, ծրագրի կատարումից հետո Bash ինտերպրետատորի `echo` հրամանով դուրս բերենք `$?` փսևդոփոփոխականի արժեքը։

```bash
$ echo $?
0
```

Հիմա վերը բերված օրինակի `hello.cxx` ֆայլը պատճենենք `hello2.cxx` անունով, և `main` ֆունկցիայի մարմինն ավարտող `}` փակագծից առաջ ավելացնենք «`return 7;`» հրամանը։

```c++
#include <iostream>

int main()
{
    std::cout << "Ողջո՜ւյն, աշխա՛րհ։\n";
    return 7;
}
```

Այնուհետև նորից թարգմանենք ծրագիրը, աշխատեցնենք ու արտածենք `$?` փսևդոփոփոխականի արժեքը։ Հրամանների հաջորդականությունը և արտածված արդյունքները հետևյալ տեսքն ունեն.

```bash
$ c++ -o hello2 hello2.cxx
$ ./hello2
Ողջո՜ւյն, աշխա՛րհ։
$ echo $?
7
```

CMake-ի մասին


